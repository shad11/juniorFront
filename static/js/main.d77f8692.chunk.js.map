{"version":3,"sources":["store/tracker/types.js","store/tracker/actions.js","store/tracker/operations.js","store/tracker/selectors.js","store/tracker/reducer.js","components/Header/index.js","assets/play_circle_green.svg","components/AddForm/index.js","utils/date.js","assets/play_circle.svg","assets/pause_circle.svg","assets/remove_circle.svg","components/TrackerList/Tracker.js","components/TrackerList/index.js","App.js","store/reducers.js","store/store.js","index.js"],"names":["SAVE_TRACKERS","saveTrackers","trackers","type","types","payload","addTracker","tracker","dispatch","getState","data","newTrackers","actions","changePeriod","id","newPeriod","index","findIndex","elem","period","changeIsActive","active","removeTracker","dataNew","filter","saveToLS","localStorage","setItem","JSON","stringify","Date","now","getTrackers","parse","getItem","endTime","map","state","initialState","className","AddForm","useDispatch","useForm","register","handleSubmit","getValues","reset","nameVal","name","trim","trackerOperations","onSubmit","placeholder","ref","onKeyUp","event","charCode","src","PLAY_CIRCLE","alt","formatPeriod","curr","dateStart","dayjs","dateEnd","hh","diff","mm","add","ss","Tracker","initialPeriod","useState","setPeriod","isActive","setIsActive","timer","useRef","useEffect","periodChange","clearTimeout","current","useCallback","oldPeriod","setTimeout","stop","start","trackerId","onClick","PAUSE_CIRCLE","REMOVE_CIRCLE","TrackerList","useSelector","trackerSelectors","App","window","addEventListener","removeEventListener","rootReducer","combineReducers","action","devTools","__REDUX_DEVTOOLS_EXTENSION__","store","createStore","compose","applyMiddleware","thunk","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d77f8692.chunk.js","sourcesContent":["export const SAVE_TRACKERS = 'SAVE_TRACKERS';","import * as types from \"./types\";\n\nexport const saveTrackers = trackers => ({\n    type: types.SAVE_TRACKERS,\n    payload: trackers\n});","import * as actions from \"./actions\";\n\nexport const addTracker = tracker => (dispatch, getState) => {\n    const { tracker: trackerStore } = getState();\n    const { data } = trackerStore;\n\n    const newTrackers = [tracker, ...data];\n\n    dispatch(actions.saveTrackers(newTrackers));\n};\n\nexport const changePeriod = (id, newPeriod) => (dispatch, getState) => {\n    const { tracker: trackerStore } = getState();\n    const { data } = trackerStore;\n\n    const index = data.findIndex(elem => elem.id === id);\n    data[index].period = newPeriod;\n\n    dispatch(actions.saveTrackers(data));\n}\n\nexport const changeIsActive = (id, active) => (dispatch, getState) => {\n    const { tracker: trackerStore } = getState();\n    const { data } = trackerStore;\n\n    const index = data.findIndex(elem => elem.id === id);\n    data[index].active = active;\n\n    dispatch(actions.saveTrackers(data));\n}\n\nexport const removeTracker = (id) => (dispatch, getState) => {\n    const { tracker: trackerStore } = getState();\n    const { data } = trackerStore;\n\n    const dataNew = data.filter(elem => elem.id !== id);\n\n    dispatch(actions.saveTrackers(dataNew));\n}\n\nexport const saveToLS = () => (dispatch, getState) => {\n    const { tracker: trackerStore } = getState();\n    const { data } = trackerStore;\n\n    localStorage.setItem('trackers', JSON.stringify(data));\n    localStorage.setItem('trackerEndTime', Date.now());\n}\n\nexport const getTrackers = () => (dispatch) => {\n    const data = JSON.parse(localStorage.getItem('trackers'));\n    const endTime = localStorage.getItem('trackerEndTime')\n\n    data.map(tracker => \n        tracker.active \n            ? tracker.period + Date.now() - endTime\n            : tracker.period\n    );\n\n    dispatch(actions.saveTrackers(data));\n}","export const getTrackers = state => state.tracker.data;","import * as types from \"./types\";\n\nconst initialState = {\n    data: []\n};\n\nexport const reducer = (state = initialState, action) => {\n    switch (action.type) {\n        case (types.SAVE_TRACKERS):\n            return {...state, data: action.payload}\n    }\n    return state;\n}","import React from \"react\";\nimport \"./Header.scss\";\n\nexport default () => (\n    <div className='header'>\n        tracker\n    </div>\n);","export default __webpack_public_path__ + \"static/media/play_circle_green.8023ef46.svg\";","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useForm } from \"react-hook-form\";\nimport { trackerOperations } from \"../../store/tracker\";\nimport \"./AddForm.scss\";\nimport PLAY_CIRCLE from \"../../assets/play_circle_green.svg\";\n\nconst AddForm = () => {\n    const dispatch = useDispatch();\n    const { register, handleSubmit, getValues, reset } = useForm();\n\n    const addTracker = () => {\n        const { name: nameVal } = getValues();\n        const name = nameVal && !!nameVal.trim()\n            ? nameVal.trim()\n            : `Tracker ${Date.now()}`;\n\n        dispatch(trackerOperations.addTracker({\n            id: Date.now(),\n            name,\n            period: 0,\n            active: true\n        }));\n\n        reset({});\n    };\n\n    const onKeyUp = (event) => {\n        if (event.charCode === 13) {\n            addTracker();\n        }\n    };\n\n    return (\n        <form className='add-form' onSubmit={handleSubmit(addTracker)}>\n            <input className='add-form__input' type='text'\n                   placeholder='Enter tracker name'\n                   name='name'\n                   ref={register}\n                   onKeyUp={onKeyUp}\n            />\n            <button type='submit' className='add-form__btn'><img src={PLAY_CIRCLE} alt='' /></button>\n        </form>\n    );\n};\n\nexport default AddForm;","import dayjs from \"dayjs\";\n\nexport const formatPeriod = period => {\n    const curr = Date.now();\n\n    const dateStart = dayjs(curr);\n    let dateEnd = dayjs(curr + period);\n\n    const hh = dateEnd.diff(dateStart, 'hour');\n    dateEnd = dateEnd.add(-hh, 'h');\n\n    const mm = dateEnd.diff(dateStart, 'm');\n    dateEnd = dateEnd.add(-mm, 'm');\n\n    const ss = dateEnd.diff(dateStart, 's');\n\n    return `${hh}:${mm}:${ss}`; \n};","export default __webpack_public_path__ + \"static/media/play_circle.69e4e2a1.svg\";","export default __webpack_public_path__ + \"static/media/pause_circle.b18b6224.svg\";","export default __webpack_public_path__ + \"static/media/remove_circle.6c0262a4.svg\";","import React, { useEffect, useState, useRef, useCallback } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { trackerOperations } from \"../../store/tracker\";\nimport { formatPeriod } from \"../../utils/date\";\nimport PLAY_CIRCLE from \"../../assets/play_circle.svg\";\nimport PAUSE_CIRCLE from \"../../assets/pause_circle.svg\";\nimport REMOVE_CIRCLE from \"../../assets/remove_circle.svg\";\n\nconst Tracker = ({ id, name, period: initialPeriod, active}) => {\n    const [period, setPeriod] = useState(initialPeriod);\n    const [isActive, setIsActive] = useState(active);\n    const timer = useRef(0);\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        if (isActive) {\n            periodChange(period);\n        }\n\n        return () => clearTimeout(timer.current);\n    }, []);\n\n    const periodChange = useCallback((oldPeriod) => {\n        timer.current = setTimeout(() => {\n            periodChange(oldPeriod + 1000);\n            dispatch(trackerOperations.changePeriod(id, oldPeriod + 1000));\n        }, 1000);\n\n        setPeriod(oldPeriod);\n    }, []);\n\n    const stop = useCallback(() => {\n        clearTimeout(timer.current);\n        dispatch(trackerOperations.changeIsActive(id, false));\n        setIsActive(false);\n    }, []);\n\n    const start = useCallback(() => {\n        periodChange(period);\n        dispatch(trackerOperations.changeIsActive(id, true));\n        setIsActive(true);\n    }, []);\n\n    const removeTracker = useCallback(trackerId => {\n        dispatch(trackerOperations.removeTracker(trackerId));\n    }, []);\n\n    return (\n        <div className={`tracker ${isActive ? 'active' : ''}`}>\n            <div className='tracker__name'>\n                {name}\n            </div>\n            <div className='tracker__period'>\n                <div className='tracker__time'>{formatPeriod(period)}</div>\n                <button className='tracker__btn'\n                    onClick={() => { isActive ? stop() : start() }}\n                >\n                    {isActive\n                        ? <img src={PAUSE_CIRCLE} alt='' />\n                        : <img src={PLAY_CIRCLE} alt='' />\n                    }\n                </button>\n                <button className='tracker__btn'\n                    onClick={() => {removeTracker(id)}}\n                >\n                    <img src={REMOVE_CIRCLE} alt='' />\n                </button>\n            </div>\n        </div>\n    )\n};\n\nexport default Tracker;","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { trackerSelectors } from \"../../store/tracker\";\nimport Tracker from \"./Tracker\";\nimport './Tracker.scss'\n\nconst TrackerList = () => {\n    const data = useSelector(trackerSelectors.getTrackers);\n\n    return (\n        <div className='tracker-list'>\n            {data.map(tracker => <Tracker\n                key={tracker.id}\n                {...tracker}\n            />)}\n        </div>\n    );\n}\n\nexport default TrackerList;","import React, { useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { trackerOperations } from \"./store/tracker\";\nimport Header from \"./components/Header\";\nimport AddForm from \"./components/AddForm\";\nimport TrackerList from \"./components/TrackerList\";\nimport \"./App.scss\";\n\nconst App = () => {\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(trackerOperations.getTrackers());\n    window.addEventListener('beforeunload', () => (dispatch(trackerOperations.saveToLS())));\n\n    return () => window.removeEventListener('beforeunload', () => (dispatch(trackerOperations.saveToLS())));\n  }, []);\n\n  return <div className='container'>\n    <Header />\n    <AddForm />\n    <TrackerList />\n  </div>;\n}\n\nexport default App;\n","import { combineReducers} from \"redux\";\nimport { reducer as trackerReducer } from \"./tracker\";\n\nconst rootReducer = combineReducers({\n    tracker: trackerReducer\n});\n\nexport default rootReducer;","import { createStore, applyMiddleware, compose } from \"redux\";\nimport thunk from \"redux-thunk\";\nimport rootReducer from \"./reducers\";\n\nconst devTools = window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__();\n\nexport const store = createStore(\n    rootReducer,\n    compose(applyMiddleware(thunk), devTools)\n);","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from \"react-redux\";\nimport App from './App';\nimport { store } from \"./store/store\";\n\nReactDOM.render(\n  <React.StrictMode>\n      <Provider store={store}>\n          <App />\n      </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}