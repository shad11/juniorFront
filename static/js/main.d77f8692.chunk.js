(this.webpackJsonptimer=this.webpackJsonptimer||[]).push([[0],{30:function(e,t,c){},33:function(e,t,c){},34:function(e,t,c){},35:function(e,t,c){},36:function(e,t,c){"use strict";c.r(t);var n={};c.r(n),c.d(n,"addTracker",(function(){return b})),c.d(n,"changePeriod",(function(){return l})),c.d(n,"changeIsActive",(function(){return m})),c.d(n,"removeTracker",(function(){return O})),c.d(n,"saveToLS",(function(){return v})),c.d(n,"getTrackers",(function(){return k}));var r={};c.r(r),c.d(r,"getTrackers",(function(){return _}));var a=c(0),i=c.n(a),o=c(11),u=c.n(o),s=c(5),d="SAVE_TRACKERS",f=function(e){return{type:d,payload:e}},j=c(2),b=function(e){return function(t,c){var n=c().tracker.data,r=[e].concat(Object(j.a)(n));t(f(r))}},l=function(e,t){return function(c,n){var r=n().tracker.data,a=r.findIndex((function(t){return t.id===e}));r[a].period=t,c(f(r))}},m=function(e,t){return function(c,n){var r=n().tracker.data,a=r.findIndex((function(t){return t.id===e}));r[a].active=t,c(f(r))}},O=function(e){return function(t,c){var n=c().tracker.data.filter((function(t){return t.id!==e}));t(f(n))}},v=function(){return function(e,t){var c=t().tracker.data;localStorage.setItem("trackers",JSON.stringify(c)),localStorage.setItem("trackerEndTime",Date.now())}},k=function(){return function(e){var t=JSON.parse(localStorage.getItem("trackers")),c=localStorage.getItem("trackerEndTime");t.map((function(e){return e.active?e.period+Date.now()-c:e.period})),e(f(t))}},_=function(e){return e.tracker.data},p=c(10),g={data:[]},h=(c(30),c(1)),x=function(){return Object(h.jsx)("div",{className:"header",children:"tracker"})},T=c(19),S=(c(33),c.p+"static/media/play_circle_green.8023ef46.svg"),E=function(){var e=Object(s.b)(),t=Object(T.a)(),c=t.register,r=t.handleSubmit,a=t.getValues,i=t.reset,o=function(){var t=a().name,c=t&&t.trim()?t.trim():"Tracker ".concat(Date.now());e(n.addTracker({id:Date.now(),name:c,period:0,active:!0})),i({})};return Object(h.jsxs)("form",{className:"add-form",onSubmit:r(o),children:[Object(h.jsx)("input",{className:"add-form__input",type:"text",placeholder:"Enter tracker name",name:"name",ref:c,onKeyUp:function(e){13===e.charCode&&o()}}),Object(h.jsx)("button",{type:"submit",className:"add-form__btn",children:Object(h.jsx)("img",{src:S,alt:""})})]})},N=c(6),w=c(16),I=c.n(w),y=function(e){var t=Date.now(),c=I()(t),n=I()(t+e),r=n.diff(c,"hour"),a=(n=n.add(-r,"h")).diff(c,"m"),i=(n=n.add(-a,"m")).diff(c,"s");return"".concat(r,":").concat(a,":").concat(i)},D=c.p+"static/media/play_circle.69e4e2a1.svg",C=c.p+"static/media/pause_circle.b18b6224.svg",L=c.p+"static/media/remove_circle.6c0262a4.svg",A=function(e){var t=e.id,c=e.name,r=e.period,i=e.active,o=Object(a.useState)(r),u=Object(N.a)(o,2),d=u[0],f=u[1],j=Object(a.useState)(i),b=Object(N.a)(j,2),l=b[0],m=b[1],O=Object(a.useRef)(0),v=Object(s.b)();Object(a.useEffect)((function(){return l&&k(d),function(){return clearTimeout(O.current)}}),[]);var k=Object(a.useCallback)((function(e){O.current=setTimeout((function(){k(e+1e3),v(n.changePeriod(t,e+1e3))}),1e3),f(e)}),[]),_=Object(a.useCallback)((function(){clearTimeout(O.current),v(n.changeIsActive(t,!1)),m(!1)}),[]),p=Object(a.useCallback)((function(){k(d),v(n.changeIsActive(t,!0)),m(!0)}),[]),g=Object(a.useCallback)((function(e){v(n.removeTracker(e))}),[]);return Object(h.jsxs)("div",{className:"tracker ".concat(l?"active":""),children:[Object(h.jsx)("div",{className:"tracker__name",children:c}),Object(h.jsxs)("div",{className:"tracker__period",children:[Object(h.jsx)("div",{className:"tracker__time",children:y(d)}),Object(h.jsx)("button",{className:"tracker__btn",onClick:function(){l?_():p()},children:l?Object(h.jsx)("img",{src:C,alt:""}):Object(h.jsx)("img",{src:D,alt:""})}),Object(h.jsx)("button",{className:"tracker__btn",onClick:function(){g(t)},children:Object(h.jsx)("img",{src:L,alt:""})})]})]})},R=(c(34),function(){var e=Object(s.c)(r.getTrackers);return Object(h.jsx)("div",{className:"tracker-list",children:e.map((function(e){return Object(h.jsx)(A,Object(p.a)({},e),e.id)}))})}),J=(c(35),function(){var e=Object(s.b)();return Object(a.useEffect)((function(){return e(n.getTrackers()),window.addEventListener("beforeunload",(function(){return e(n.saveToLS())})),function(){return window.removeEventListener("beforeunload",(function(){return e(n.saveToLS())}))}}),[]),Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)(x,{}),Object(h.jsx)(E,{}),Object(h.jsx)(R,{})]})}),V=c(7),X=c(18),U=Object(V.c)({tracker:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(p.a)(Object(p.a)({},e),{},{data:t.payload})}return e}}),K=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),P=Object(V.e)(U,Object(V.d)(Object(V.a)(X.a),K));u.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(s.a,{store:P,children:Object(h.jsx)(J,{})})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.d77f8692.chunk.js.map